#+TITLE: Fuyu TKL Build Guide
#+OPTIONS: toc:1

[[file:index.org][‚Üê Back to blog]]

https://i.imgur.com/nOed4PF.jpg

https://i.imgur.com/6DI5Qya.jpg

* Overview
The Fuyu is a comfy TKL PCB that support multiple layouts and is compatible with a number of cases. You can pair it with something fancy, like the Geonworks F1-8K, or something a little easier on the wallet, like CustomKBD's TKRielle. It has cool features like support for multiple layouts, hella LEDs (including a programmable snowflake arrangement), firmware for visual keymap editors like VIAL and VIA, and uses a RP2040 MCU.

I highly recommend checking out the [[https://github.com/zykrah/fuyu][Fuyu Github repo]] for more info.

* Parts
- 1 x [[https://github.com/zykrah/fuyu][Fuyu PCB]]: see [[*Printing PCBs][see below on printing PCBs]]
- 87 x MX switches
- 87 x keycaps (including a 6.25U spacebar!)
- 4 x 2U, 1 x 6.25U stabs
- A compatible case, like the Geonworks F1-8K/F1-8X or CustomKBD's TKRielle.

https://i.imgur.com/Uevsmvz.jpg

** Printing PCBs
You can get the Fuyu PCB online from Geonworks or CustomKBD or do what I did and get it printed. I went with PCBWay and got them to assemble the PCBs for me too. I've put up a [[https://www.pcbway.com/project/shareproject/Fuyu_TKL_Keyboard_PCB_f114f3c9.html][shared project]] so all you have to do it hit "Add to cart".

* Build guide
** PCB assembly
Having the PCBs preassembled honestly saves a lot of time, especially if you're like me and are newer to soldering. If you're doing it the hard way, take your time soldering the components to the PCB and reference the [[https://github.com/zykrah/fuyu][Fuyu Github repo]] as you go.

If all goes well[fn::I initially messed up and forgot to include the USB-C connector ü§¶‚Äç‚ôÇÔ∏è The shared project above has the corrected BOM.], it should look a little something like this[fn::If you're nervous and want more reference images, you can see what mine looked like [[https://pcbwayfile.s3.us-west-2.amazonaws.com/mail/23/01/07/1501006057824.zip][here]].]:

[[https://i.imgur.com/V5dXndl.jpg]]

** Setting up firmware
It's important to take the time now to make sure your PCB is working properly. That means plugging it into your computer and seeing if it lights up!

If you're like me and printed the PCB yourself, you'll have to flash the desired firmware onto the RP2040. If you bought it from a store, they've probably already done this for you and you can skip the rest of this section.

Luckily, the process isn't too hard. First, we need to clone and build the firmware[fn::See below if you'd rather just download a pre-built =.uf2= file]. I'm using the [[https://github.com/zykrah/vial-qmk/tree/vdev-zykrah/keyboards/zykrah/fuyu][VIAL firmware]] but you could just as easily use the [[https://github.com/qmk/qmk_firmware/tree/master/keyboards/zykrah/fuyu][firmware in QMK master]] (which is VIA-compatible).

We need to clone the firmware to our machine:
#+begin_src sh
git clone https://github.com/zykrah/vial-qmk/
#+end_src

Next, we need to build it. This requires [[https://docs.qmk.fm/#/getting_started_build_tools][setting up your QMK environment]], if you haven't done it before. Finally, we can run:
#+begin_src sh
make zykrah/fuyu:vial
#+end_src

This should generate a file called =zykrah_fuyu_vial.uf2= in the directory where you cloned the repo.

If that's all too tricky, don't worry, you can download the [[https://github.com/tzcl/keyboards/tree/fuyu][firmware from my Github]].

Once you connect the PCB to your computer, it should automatically pop up as =RPI-RP2= and you can flash it by dragging the =.uf2= file across. If it doesn't pop up, you may need to put the RP2040 into bootloader mode by shorting the =BOOT= pins under the End key.

https://i.imgur.com/cwU16RF.jpg

If you're still having issues, you've most likely flipped the orientation of an LED or a diode and caused a short-circuit. It can be tricky to work out exactly what's going wrong but there are some great Discord communities out there that may be able to help you through the troubleshooting process. Good luck!

** Installing stabilisers
Now, to the actual build.

The first step is to install your stabilisers. It's worth taking the time to lube and tune them because it's a real pain to try and adjust them once you've started soldering your switches in. [[https://www.youtube.com/watch?v=usNx1_d0HbQ][Taeha Types has a great video]] on this if you need more info.

https://i.imgur.com/YoCPn8z.jpg

** Mounting plate and soldering switches

Next up is soldering in the switches. I like putting the plate on and securing it by installing the corner switches first.

https://i.imgur.com/MZb3Jua.jpg

From there, it's just taking the time to put the switches in place and solder the pins. Be careful not to bend any switch pin legs as they are quite easy to break off. Again, don't rush and make sure everything looks good because soldering. I used a combination of tactile (Boba U4T) and linear (Gateron Yellow) switches[fn::Personally, I'm a big fan of linears but wanted to try some tactile switches. The feedback on keypresses is really nice but I feel they get tiring after typing for longer periods of time. Linear modifiers is a good compromise.].

https://i.imgur.com/3CweXPi.jpg

Once all the switches are in, it's time to plug it in and test them out. [[https://config.qmk.fm/#/test][QMK Configurator]] is a good way to test that all the switches are working and emitting the right keycodes. The most likely reason for a switch to not be working is that the switch pins don't have good contact with the PCB so you may need to resolder them.

https://i.imgur.com/FfGqWta.jpg

** Final touches

The last step is to put your case together!

https://i.imgur.com/iA8cNqH.jpg

Since this will depend on the case you have, I don't have any specific tips. In my case, I went with the TKRielle case which was the first time I've encountered a gasket mounted POM plate. It took me longer than I'd like to admit to figure out how to mount the PCB but I got there in the end and was pretty happy with the result.

https://i.imgur.com/qkjJz79.jpg

Unfortunately I don't have a sound test for you but I love the thock this board has and the flex when typing. If you're interested, [[https://www.youtube.com/@zestrion_][Zestrion]] has a sound test of the TKRielle on YouTube:

 @@html:<iframe width="560" height="315" src="https://www.youtube.com/embed/VjeUizURuPQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>@@
